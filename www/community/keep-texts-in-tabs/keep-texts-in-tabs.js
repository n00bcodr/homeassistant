!function(){"use strict";function e(e,t,n,o){return new(n||(n=Promise))((function(i,s){function r(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))}function t(e,t,n,o){return new(n||(n=Promise))((function(i,s){function r(e){try{c(o.next(e))}catch(e){s(e)}}function a(e){try{c(o.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}c((o=o.apply(e,t||[])).next())}))}function n(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)}function o(e,t,n,o,i){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?i.call(e,n):i?i.value=n:t.set(e,n),n}"function"==typeof SuppressedError&&SuppressedError,"function"==typeof SuppressedError&&SuppressedError;const i="$",s=":host",r="invalid selector";function a(e,t,n,o,i=!1){return new Promise((s=>{let a=0;const c=()=>{const l=i?e.querySelectorAll(t):e.querySelector(t);i&&l.length||!i&&null!==l?s(l):(a++,a<n?setTimeout(c,o):s(i?document.querySelectorAll(r):null))};c()}))}function c(e,t,n){return new Promise((o=>{let i=0;const s=()=>{const r=e.shadowRoot;r?o(r):(i++,i<t?setTimeout(s,n):o(null))};s()}))}function l(e){return e instanceof Promise?e:Promise.resolve(e)}function h(e,n,o,r){return t(this,void 0,void 0,(function*(){let t=null;const l=e.length;for(let h=0;h<l;h++){if(0===h)if(e[h].length)t=yield a(n,e[h],o,r);else{if(n instanceof Document)throw new SyntaxError(`You can not select a shadowRoot (${i}) of the document.`);t=n.shadowRoot?yield a(n.shadowRoot,e[++h],o,r):null}else{const n=yield c(t,o,r);t=n?yield a(n,`${s} ${e[h]}`,o,r):null}if(null===t)return null}return t}))}function _(e,n,o,s){return t(this,void 0,void 0,(function*(){const t=function(e,t){return function(e){return e.split(",").map((e=>e.trim()))}(e).map((e=>{const n=function(e){return e.split(i).map((e=>e.trim()))}(e);return t(n)}))}(e,(e=>{if(!e[e.length-1].length)throw new SyntaxError(function(e,t){return`${e} cannot be used with a selector ending in a shadowRoot (${i}).${t?` If you want to select a shadowRoot, use ${t} instead.`:""}`}("asyncQuerySelector","asyncShadowRootQuerySelector"));return e})),r=t.length;for(let e=0;e<r;e++){const i=yield h(t[e],n,o,s);if(i)return i}return null}))}var O,d;function A(...e){return t(this,void 0,void 0,(function*(){if((e=>{const[t,n]=e;return(o=t)&&(o instanceof Document||o instanceof Element)&&"string"==typeof n;var o})(e)){const[t,n,o]=e;return yield _(n,t,(null==o?void 0:o.retries)||10,(null==o?void 0:o.delay)||10)}const[t,n]=e;return yield _(t,document,(null==n?void 0:n.retries)||10,(null==n?void 0:n.delay)||10)}))}let f=class e{constructor(e,t){O.set(this,void 0),d.set(this,void 0),e instanceof Node||e instanceof Promise?(o(this,O,e,"f"),o(this,d,Object.assign({retries:10,delay:10},t||{}),"f")):(o(this,O,document,"f"),o(this,d,Object.assign({retries:10,delay:10},e||{}),"f"))}get element(){return l(n(this,O,"f")).then((e=>e instanceof NodeList?e[0]||null:e))}get[(O=new WeakMap,d=new WeakMap,i)](){const t=l(n(this,O,"f")).then((e=>e instanceof Document||e instanceof ShadowRoot||null===e||e instanceof NodeList&&0===e.length?null:e instanceof NodeList?c(e[0],n(this,d,"f").retries,n(this,d,"f").delay):c(e,n(this,d,"f").retries,n(this,d,"f").delay)));return new e(t,n(this,d,"f"))}get all(){return l(n(this,O,"f")).then((e=>e instanceof NodeList?e:document.querySelectorAll(r)))}get asyncParams(){return n(this,d,"f")}eq(e){return t(this,void 0,void 0,(function*(){return l(n(this,O,"f")).then((t=>t instanceof NodeList&&t[e]||null))}))}query(t){const o=l(n(this,O,"f")).then((e=>null===e||e instanceof NodeList&&0===e.length?null:e instanceof NodeList?a(e[0],t,n(this,d,"f").retries,n(this,d,"f").delay,!0):a(e,t,n(this,d,"f").retries,n(this,d,"f").delay,!0)));return new e(o,n(this,d,"f"))}};function E(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)}function u(e,t,n,o,i){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?i.call(e,n):i?i.value=n:t.set(e,n),n}"function"==typeof SuppressedError&&SuppressedError;const I="$",L={retries:100,delay:50};var N,p,R,T,w;!function(e){e.HOME_ASSISTANT="HOME_ASSISTANT",e.HOME_ASSISTANT_MAIN="HOME_ASSISTANT_MAIN",e.HA_DRAWER="HA_DRAWER",e.HA_SIDEBAR="HA_SIDEBAR"}(N||(N={})),function(e){e.PARTIAL_PANEL_RESOLVER="PARTIAL_PANEL_RESOLVER",e.HA_PANEL_LOVELACE="HA_PANEL_LOVELACE",e.HUI_ROOT="HUI_ROOT",e.HEADER="HEADER",e.HUI_VIEW="HUI_VIEW"}(p||(p={})),function(e){e.HA_MORE_INFO_DIALOG="HA_MORE_INFO_DIALOG",e.HA_DIALOG="HA_DIALOG",e.HA_DIALOG_CONTENT="HA_DIALOG_CONTENT",e.HA_MORE_INFO_DIALOG_INFO="HA_MORE_INFO_DIALOG_INFO",e.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK="HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK",e.HA_DIALOG_MORE_INFO_SETTINGS="HA_DIALOG_MORE_INFO_SETTINGS"}(R||(R={})),function(e){e.ON_LOVELACE_PANEL_LOAD="onLovelacePanelLoad",e.ON_LOVELACE_MORE_INFO_DIALOG_OPEN="onLovelaceMoreInfoDialogOpen",e.ON_LOVELACE_HISTORY_AND_LOGBOOK_DIALOG_OPEN="onLovelaceHistoryAndLogBookDialogOpen",e.ON_LOVELACE_SETTINGS_DIALOG_OPEN="onLovelaceSettingsDialogOpen"}(T||(T={})),function(e){e.HOME_ASSISTANT="home-assistant",e.HOME_ASSISTANT_MAIN="home-assistant-main",e.HA_DRAWER="ha-drawer",e.HA_SIDEBAR="ha-sidebar",e.PARTIAL_PANEL_RESOLVER="partial-panel-resolver",e.HA_PANEL_LOVELACE="ha-panel-lovelace",e.HUI_ROOT="hui-root",e.HEADER=".header",e.HUI_VIEW="hui-view",e.HA_MORE_INFO_DIALOG="ha-more-info-dialog",e.HA_DIALOG="ha-dialog",e.HA_DIALOG_CONTENT=".content",e.HA_MORE_INFO_DIALOG_INFO="ha-more-info-info",e.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK="ha-more-info-history-and-logbook",e.HA_DIALOG_MORE_INFO_SETTINGS="ha-more-info-settings"}(w||(w={}));const v={[N.HOME_ASSISTANT]:{selector:w.HOME_ASSISTANT,children:{shadowRoot:{selector:I,children:{[N.HOME_ASSISTANT_MAIN]:{selector:w.HOME_ASSISTANT_MAIN,children:{shadowRoot:{selector:I,children:{[N.HA_DRAWER]:{selector:w.HA_DRAWER,children:{[N.HA_SIDEBAR]:{selector:w.HA_SIDEBAR,children:{shadowRoot:{selector:I}}}}}}}}}}}}}},H={[p.PARTIAL_PANEL_RESOLVER]:{selector:w.PARTIAL_PANEL_RESOLVER,children:{[p.HA_PANEL_LOVELACE]:{selector:w.HA_PANEL_LOVELACE,children:{shadowRoot:{selector:I,children:{[p.HUI_ROOT]:{selector:w.HUI_ROOT,children:{shadowRoot:{selector:I,children:{[p.HEADER]:{selector:w.HEADER},[p.HUI_VIEW]:{selector:w.HUI_VIEW}}}}}}}}}}}},S={shadowRoot:{selector:I,children:{[R.HA_MORE_INFO_DIALOG]:{selector:w.HA_MORE_INFO_DIALOG,children:{shadowRoot:{selector:I,children:{[R.HA_DIALOG]:{selector:w.HA_DIALOG,children:{[R.HA_DIALOG_CONTENT]:{selector:w.HA_DIALOG_CONTENT,children:{[R.HA_MORE_INFO_DIALOG_INFO]:{selector:w.HA_MORE_INFO_DIALOG_INFO},[R.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]:{selector:w.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK},[R.HA_DIALOG_MORE_INFO_SETTINGS]:{selector:w.HA_DIALOG_MORE_INFO_SETTINGS}}}}}}}}}}}},m=(e,t,n=null,o=!1)=>Object.entries(t||{}).reduce(((t,i)=>{const[s,r]=i;if(r.selector===I&&n)return r.children?Object.assign(Object.assign({},t),m(e,r.children,n,!0)):t;const a=n?n.then((t=>{return A(t,(n=r.selector,o?"$ "+n:n),e);var n})):A(r.selector,e);return t[s]={element:a,children:m(e,r.children,a),selector:new f(a,e)},t}),{}),D=(e,t)=>{const n=Object.entries(t);for(const t of n){if(t[0]===e)return t[1];{const n=D(e,t[1].children);if(n)return n}}},b=(e,t)=>Object.keys(e).reduce(((e,n)=>{const o=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}(D(n,t),["children"]);return e[n]=Object.assign({},o),e}),{});var y,M,G,P,g,F,C,W,B,V,k,$,j,x,U,q,Y,K,z,X,Q,J,Z,ee,te,ne;class oe extends EventTarget{constructor(e={}){super(),y.add(this),M.set(this,void 0),G.set(this,void 0),P.set(this,void 0),g.set(this,void 0),F.set(this,void 0),C.set(this,void 0),W.set(this,void 0),B.set(this,void 0),V.set(this,void 0),k.set(this,void 0),$.set(this,void 0),j.set(this,void 0),x.set(this,void 0),U.set(this,void 0),q.set(this,void 0),Y.set(this,void 0),u(this,M,Object.assign(Object.assign({},L),e),"f")}listen(){u(this,j,E(this,y,"m",J).bind(this),"f"),u(this,x,E(this,y,"m",Z).bind(this),"f"),u(this,U,E(this,y,"m",ee).bind(this),"f"),u(this,q,E(this,y,"m",te).bind(this),"f"),u(this,B,new MutationObserver(E(this,j,"f")),"f"),u(this,V,new MutationObserver(E(this,x,"f")),"f"),u(this,k,new MutationObserver(E(this,U,"f")),"f"),u(this,$,new MutationObserver(E(this,q,"f")),"f"),E(this,y,"m",X).call(this),E(this,y,"m",Q).call(this)}addEventListener(e,t,n){super.addEventListener(e,t,n)}}M=new WeakMap,G=new WeakMap,P=new WeakMap,g=new WeakMap,F=new WeakMap,C=new WeakMap,W=new WeakMap,B=new WeakMap,V=new WeakMap,k=new WeakMap,$=new WeakMap,j=new WeakMap,x=new WeakMap,U=new WeakMap,q=new WeakMap,Y=new WeakMap,y=new WeakSet,K=function(e,t){this.dispatchEvent(new CustomEvent(e,{detail:t}))},z=function(e=R.HA_MORE_INFO_DIALOG_INFO){u(this,G,m(E(this,M,"f"),S,E(this,C,"f").HOME_ASSISTANT.element),"f");const t=b(R,E(this,G,"f"));t.HA_DIALOG_CONTENT.element.then((e=>{E(this,V,"f").disconnect(),E(this,V,"f").observe(e,{childList:!0})})),u(this,F,((e,t)=>[R.HA_MORE_INFO_DIALOG,R.HA_DIALOG,R.HA_DIALOG_CONTENT,t].reduce(((t,n)=>(t[n]=e[n],t)),{}))(t,e),"f");const n={[R.HA_MORE_INFO_DIALOG_INFO]:T.ON_LOVELACE_MORE_INFO_DIALOG_OPEN,[R.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]:T.ON_LOVELACE_HISTORY_AND_LOGBOOK_DIALOG_OPEN,[R.HA_DIALOG_MORE_INFO_SETTINGS]:T.ON_LOVELACE_SETTINGS_DIALOG_OPEN};E(this,y,"m",K).call(this,n[e],E(this,F,"f"))},X=function(){u(this,P,m(E(this,M,"f"),v),"f"),u(this,C,b(N,E(this,P,"f")),"f"),E(this,C,"f")[N.HOME_ASSISTANT].selector.$.element.then((e=>{E(this,B,"f").disconnect(),E(this,B,"f").observe(e,{childList:!0})}))},Q=function(){const e=Date.now();e-E(this,Y,"f")<500||(u(this,Y,e,"f"),u(this,g,m(E(this,M,"f"),H,E(this,C,"f")[N.HA_DRAWER].element),"f"),u(this,W,b(p,E(this,g,"f")),"f"),E(this,W,"f")[p.PARTIAL_PANEL_RESOLVER].element.then((e=>{E(this,k,"f").disconnect(),E(this,k,"f").observe(e,{childList:!0})})),E(this,W,"f")[p.HA_PANEL_LOVELACE].selector.$.element.then((e=>{E(this,$,"f").disconnect(),E(this,$,"f").observe(e,{childList:!0})})),E(this,y,"m",K).call(this,T.ON_LOVELACE_PANEL_LOAD,Object.assign(Object.assign({},E(this,C,"f")),E(this,W,"f"))))},J=function(e){e.forEach((({addedNodes:e})=>{e.forEach((e=>{e.localName===w.HA_MORE_INFO_DIALOG&&E(this,y,"m",z).call(this)}))}))},Z=function(e){e.forEach((({addedNodes:e})=>{e.forEach((e=>{const t={[w.HA_MORE_INFO_DIALOG_INFO]:R.HA_MORE_INFO_DIALOG_INFO,[w.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]:R.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK,[w.HA_DIALOG_MORE_INFO_SETTINGS]:R.HA_DIALOG_MORE_INFO_SETTINGS};if(e.localName&&e.localName in t){const n=e.localName;E(this,y,"m",z).call(this,t[n])}}))}))},ee=function(e){e.forEach((({addedNodes:e})=>{e.forEach((e=>{e.localName===w.HA_PANEL_LOVELACE&&E(this,y,"m",Q).call(this)}))}))},te=function(e){e.forEach((({addedNodes:e})=>{e.forEach((e=>{e.localName===w.HUI_ROOT&&E(this,y,"m",Q).call(this)}))}))},function(e){e.AFTER="after",e.BEFORE="before"}(ne||(ne={}));const ie="keep-texts-in-tabs";var se,re;!function(e){e.TOOLBAR=".toolbar",e.HA_TABS="ha-tabs",e.PAPER_TABS="paper-tabs",e.PAPER_TAB="paper-tab",e.HUI_VIEW="hui-view",e.HA_ICON="ha-icon"}(se||(se={})),function(e){e[e.TEXT=3]="TEXT"}(re||(re={}));const ae=e=>{let t=(e=>e.querySelector(`#${ie}`))(e);t||(t=document.createElement("style"),t.setAttribute("id",ie),e.appendChild(t)),t.innerHTML=`\n        paper-tab span.${ie} {\n            display: inline-block;\n        }\n        paper-tab span.${ie}-${ne.BEFORE} {\n            padding-right: 5px;\n        }\n        paper-tab span.${ie}-${ne.AFTER} {\n            padding-left: 5px;\n        }\n    `};class ce{constructor(){const t=new oe;t.addEventListener("onLovelacePanelLoad",(t=>e(this,void 0,void 0,(function*(){const{HA_PANEL_LOVELACE:e,HUI_ROOT:n,HEADER:o}=t.detail;this.lovelace=yield e.element,this.huiRoot=yield n.selector.$.element,this.appToolbar=yield o.selector.query(se.TOOLBAR).element,this.run()})))),t.listen(),this.resizeWindowBinded=this.resizeWindow.bind(this),window.addEventListener("resize",this.resizeWindowBinded)}run(){var t;return e(this,void 0,void 0,(function*(){null===(t=this.toolBarObserver)||void 0===t||t.disconnect(),ae(this.appToolbar);const e=this.lovelace.lovelace.config;this.toolBarObserver=new MutationObserver(this.process.bind(this,e.keep_texts_in_tabs)),this.toolBarObserver.observe(this.appToolbar,{childList:!0}),this.process(e.keep_texts_in_tabs)}))}process(e){var t;if(null===(t=this.paperTabsEditionResolver)||void 0===t||t.disconnect(),!e)return;let n;n=e.mobile_config&&window.innerWidth<=(e.mobile_config.mobile_screen_width||640)?e.mobile_config:e;const{enabled:o=!1,include:i,exclude:s,position:r=ne.AFTER,override:a=[]}=n;if(i&&s)throw Error(`${ie}: Configuration cannot have "include" and "exclude" properties at the same time`);const c=!!this.huiRoot.querySelector(":host > div.edit-mode"),l=c?this.huiRoot.querySelector(se.PAPER_TABS):this.appToolbar.querySelector(se.HA_TABS),h=l?Array.from(l.querySelectorAll(se.PAPER_TAB)):[];if(!h.length)return;const _=a.map((e=>e.toUpperCase()));h.map((e=>{const t=e.getAttribute("aria-label")||"",n=e.querySelector(`span.${ie}`);return n&&n.remove(),{element:e,label:t,icon:e.querySelector(se.HA_ICON),position:_.includes(t.toUpperCase())?r===ne.AFTER?ne.BEFORE:ne.AFTER:r}})).filter((e=>!(!o||!e.icon)&&(i?i.includes(e.label):!s||!s.includes(e.label)))).forEach((e=>{const t=((e,t)=>{const n=document.createTextNode(e),o=document.createElement("span");return o.classList.add(ie,`${ie}-${t}`),o.appendChild(n),o})(e.label,e.position);e.position===ne.AFTER?e.element.insertBefore(t,e.icon.nextSibling):e.element.insertBefore(t,e.icon)})),o&&c&&(this.paperTabsEditionResolver=new MutationObserver((t=>{t.forEach((({removedNodes:t,target:n})=>{t.forEach((t=>{t.nodeType===re.TEXT&&n.nodeName===se.PAPER_TAB.toUpperCase()&&this.process(e)}))}))})),this.paperTabsEditionResolver.observe(this.huiRoot.querySelector(se.PAPER_TABS),{childList:!0,subtree:!0})),"function"==typeof l._boundNotifyResize&&l._boundNotifyResize()}resizeWindow(){window.clearTimeout(this.resizeDelay),this.resizeDelay=window.setTimeout((()=>{this.run()}),100)}}console.info(`%c＋ ${ie.toUpperCase()}%cv1.1.2`,"font-weight: bold; color: #038fc7; padding: 2px;","font-weight: normal; color: #212121; padding: 2px"),Promise.resolve(customElements.whenDefined(se.HUI_VIEW)).then((()=>{new ce}))}();
