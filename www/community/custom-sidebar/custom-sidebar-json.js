!function(){"use strict";var e=function(){return e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)};function t(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function n(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}function r(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}"function"==typeof SuppressedError&&SuppressedError;var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)};function i(e,t,n,r){return new(n||(n=Promise))((function(t,o){function i(e){try{s(r.next(e))}catch(e){o(e)}}function a(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var r;e.done?t(e.value):(r=e.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,a)}s((r=r.apply(e,[])).next())}))}function a(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}"function"==typeof SuppressedError&&SuppressedError;var s="$",c=":host",u="invalid selector",l=10,_=10,d=function(e){var t,n=e[0],r=e[1];return(t=n)&&(t instanceof Document||t instanceof Element||t instanceof ShadowRoot)&&"string"==typeof r};function h(e,t){return function(e){return e.split(",").map((function(e){return e.trim()}))}(e).map((function(e){var n=function(e){return e.split(s).map((function(e){return e.trim()}))}(e);return t(n)}))}var f=function(e,t,n,r){return new Promise((function(o){var i=0,a=function(){var s=e();t(s)?o(s):++i<n?setTimeout(a,r):o(s)};a()}))};function p(e,t){var n=t?" If you want to select a shadowRoot, use ".concat(t," instead."):"";return"".concat(e," cannot be used with a selector ending in a shadowRoot (").concat(s,").").concat(n)}function E(e){return e instanceof Promise?e:Promise.resolve(e)}function A(){return"You can not select a shadowRoot (".concat(s,") of the document.")}function O(){return"You can not select a shadowRoot (".concat(s,") of a shadowRoot.")}function v(e,t){for(var n,r,o=null,i=e.length,a=0;a<i;a++){if(0===a)if(e[a].length)o=t.querySelector(e[a]);else{if(t instanceof Document)throw new SyntaxError(A());if(t instanceof ShadowRoot)throw new SyntaxError(O());o=(null===(n=t.shadowRoot)||void 0===n?void 0:n.querySelector(e[++a]))||null}else o=(null===(r=o.shadowRoot)||void 0===r?void 0:r.querySelector("".concat(c," ").concat(e[a])))||null;if(null===o)return null}return o}function m(e,t){var n,r=function(e,t,n){for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return[].concat(r||Array.prototype.slice.call(t))}(0,e),o=r.pop();if(!r.length)return t.querySelectorAll(o);var i=v(r,t);return(null===(n=null==i?void 0:i.shadowRoot)||void 0===n?void 0:n.querySelectorAll("".concat(c," ").concat(o)))||null}function I(e,t){if(1===e.length&&!e[0].length){if(t instanceof Document)throw new SyntaxError(A());if(t instanceof ShadowRoot)throw new SyntaxError(O());return t.shadowRoot}var n=v(e,t);return(null==n?void 0:n.shadowRoot)||null}function y(e,t,n,r){return i(this,0,void 0,(function(){return a(this,(function(o){return[2,f((function(){return function(e,t,n,r){for(var o=h(e,(function(e){if(!e[e.length-1].length)throw new SyntaxError(p(n,r));return e})),i=o.length,a=0;a<i;a++){var s=v(o[a],t);if(s)return s}return null}(e,t,"asyncQuerySelector","asyncShadowRootQuerySelector")}),(function(e){return!!e}),n,r)]}))}))}function T(e,t,n,r){return i(this,0,void 0,(function(){return a(this,(function(o){return[2,f((function(){return function(e,t,n){for(var r=h(e,(function(e){if(!e[e.length-1].length)throw new SyntaxError(p(n));return e})),o=r.length,i=0;i<o;i++){var a=m(r[i],t);if(null==a?void 0:a.length)return a}return document.querySelectorAll(u)}(e,t,"asyncQuerySelectorAll")}),(function(e){return!!e.length}),n,r)]}))}))}function N(e,t,n,r){return i(this,0,void 0,(function(){return a(this,(function(o){return[2,f((function(){return function(e,t,n,r){for(var o=h(e,(function(e){if(e.pop().length)throw new SyntaxError(function(e,t){return"".concat(e," must be used with a selector ending in a shadowRoot (").concat(s,"). If you don't want to select a shadowRoot, use ").concat(t," instead.")}(n,r));return e})),i=o.length,a=0;a<i;a++){var c=I(o[a],t);if(c)return c}return null}(e,t,"asyncShadowRootQuerySelector","asyncQuerySelector")}),(function(e){return!!e}),n,r)]}))}))}var S=function(e,t){var n=e.querySelectorAll(t);if(n.length)return n;if(e instanceof Element&&e.shadowRoot){var r=S(e.shadowRoot,t);if(r.length)return r}for(var o=0,i=Array.from(e.querySelectorAll("*"));o<i.length;o++){var a=i[o],s=S(a,t);if(s.length)return s}return document.querySelectorAll(u)},b=function(e,t,n,r){return f((function(){return S(e,t)}),(function(e){return!!e.length}),n,r)};function L(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(this,0,void 0,(function(){var t,n,r,o,i;return a(this,(function(a){switch(a.label){case 0:return d(e)?(t=e[0],n=e[1],r=e[2],[4,y(n,t,(null==r?void 0:r.retries)||l,(null==r?void 0:r.delay)||_)]):[3,2];case 1:case 3:return[2,a.sent()];case 2:return o=e[0],i=e[1],[4,y(o,document,(null==i?void 0:i.retries)||l,(null==i?void 0:i.delay)||_)]}}))}))}function w(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(this,0,void 0,(function(){var t,n,r,o,i;return a(this,(function(a){switch(a.label){case 0:return d(e)?(t=e[0],n=e[1],r=e[2],[4,T(n,t,(null==r?void 0:r.retries)||l,(null==r?void 0:r.delay)||_)]):[3,2];case 1:return[2,a.sent()];case 2:return o=e[0],i=e[1],[2,T(o,document,(null==i?void 0:i.retries)||l,(null==i?void 0:i.delay)||_)]}}))}))}function R(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(this,0,void 0,(function(){var t,n,r,o,i;return a(this,(function(a){switch(a.label){case 0:return d(e)?(t=e[0],n=e[1],r=e[2],[4,N(n,t,(null==r?void 0:r.retries)||l,(null==r?void 0:r.delay)||_)]):[3,2];case 1:return[2,a.sent()];case 2:return o=e[0],i=e[1],[2,N(o,document,(null==i?void 0:i.retries)||l,(null==i?void 0:i.delay)||_)]}}))}))}var g=function(){function e(e,t){e instanceof Node||e instanceof Promise?(this._element=e,this._asyncParams=o({retries:l,delay:_},t||{})):(this._element=document,this._asyncParams=o({retries:l,delay:_},e||{}))}return Object.defineProperty(e.prototype,"element",{get:function(){return E(this._element).then((function(e){return e instanceof NodeList?e[0]||null:e}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,s,{get:function(){var t=this;return new e(E(this._element).then((function(e){return e instanceof Document||e instanceof ShadowRoot||null===e||e instanceof NodeList&&0===e.length?null:e instanceof NodeList?R(e[0],s,t._asyncParams):R(e,s,t._asyncParams)})),this._asyncParams)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"all",{get:function(){return E(this._element).then((function(e){return e instanceof NodeList?e:document.querySelectorAll(u)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"asyncParams",{get:function(){return this._asyncParams},enumerable:!1,configurable:!0}),e.prototype.eq=function(e){return i(this,0,void 0,(function(){return a(this,(function(t){return[2,E(this._element).then((function(t){return t instanceof NodeList&&t[e]||null}))]}))}))},e.prototype.query=function(t){var n=this;return new e(E(this._element).then((function(e){return null===e||e instanceof NodeList&&0===e.length?null:e instanceof NodeList?w(e[0],t,n._asyncParams):w(e,t,n._asyncParams)})),this._asyncParams)},e.prototype.deepQuery=function(t){var n=this;return new e(E(this._element).then((function(e){return null===e||e instanceof NodeList&&0===e.length?null:e instanceof NodeList?Promise.race(Array.from(e).map((function(e){return b(e,t,n._asyncParams.retries,n._asyncParams.delay)}))):b(e,t,n._asyncParams.retries,n._asyncParams.delay)})),this._asyncParams)},e}(),D=function(e,t){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},D(e,t)},P=function(){return P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},P.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var H,C,M,G,B,x,F,j,W,k,q,U,V,K,Y,$,X="$",J={retries:100,delay:50,eventThreshold:450};!function(e){e.HOME_ASSISTANT="HOME_ASSISTANT",e.HOME_ASSISTANT_MAIN="HOME_ASSISTANT_MAIN",e.HA_DRAWER="HA_DRAWER",e.HA_SIDEBAR="HA_SIDEBAR",e.PARTIAL_PANEL_RESOLVER="PARTIAL_PANEL_RESOLVER"}(H||(H={})),function(e){e.HA_PANEL_LOVELACE="HA_PANEL_LOVELACE",e.HUI_ROOT="HUI_ROOT",e.HEADER="HEADER",e.HUI_VIEW="HUI_VIEW"}(C||(C={})),function(e){e.HA_MORE_INFO_DIALOG="HA_MORE_INFO_DIALOG",e.HA_DIALOG="HA_DIALOG",e.HA_DIALOG_CONTENT="HA_DIALOG_CONTENT",e.HA_MORE_INFO_DIALOG_INFO="HA_MORE_INFO_DIALOG_INFO",e.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK="HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK",e.HA_DIALOG_MORE_INFO_SETTINGS="HA_DIALOG_MORE_INFO_SETTINGS"}(M||(M={})),function(e){e.ON_LISTEN="onListen",e.ON_PANEL_LOAD="onPanelLoad",e.ON_LOVELACE_PANEL_LOAD="onLovelacePanelLoad",e.ON_MORE_INFO_DIALOG_OPEN="onMoreInfoDialogOpen",e.ON_HISTORY_AND_LOGBOOK_DIALOG_OPEN="onHistoryAndLogBookDialogOpen",e.ON_SETTINGS_DIALOG_OPEN="onSettingsDialogOpen"}(G||(G={})),function(e){e.HOME_ASSISTANT="home-assistant",e.HOME_ASSISTANT_MAIN="home-assistant-main",e.HA_DRAWER="ha-drawer",e.HA_SIDEBAR="ha-sidebar",e.PARTIAL_PANEL_RESOLVER="partial-panel-resolver",e.HA_PANEL_LOVELACE="ha-panel-lovelace",e.HUI_ROOT="hui-root",e.HEADER=".header",e.HUI_VIEW="hui-view",e.HA_MORE_INFO_DIALOG="ha-more-info-dialog",e.HA_DIALOG="ha-dialog",e.HA_DIALOG_CONTENT=".content",e.HA_MORE_INFO_DIALOG_INFO="ha-more-info-info",e.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK="ha-more-info-history-and-logbook",e.HA_DIALOG_MORE_INFO_SETTINGS="ha-more-info-settings"}($||($={}));var Q,z,Z=((B={})[H.HOME_ASSISTANT]={selector:$.HOME_ASSISTANT,children:{shadowRoot:{selector:X,children:(x={},x[H.HOME_ASSISTANT_MAIN]={selector:$.HOME_ASSISTANT_MAIN,children:{shadowRoot:{selector:X,children:(F={},F[H.HA_DRAWER]={selector:$.HA_DRAWER,children:(j={},j[H.HA_SIDEBAR]={selector:$.HA_SIDEBAR,children:{shadowRoot:{selector:X}}},j[H.PARTIAL_PANEL_RESOLVER]={selector:$.PARTIAL_PANEL_RESOLVER},j)},F)}}},x)}}},B),ee=((W={})[C.HA_PANEL_LOVELACE]={selector:$.HA_PANEL_LOVELACE,children:{shadowRoot:{selector:X,children:(k={},k[C.HUI_ROOT]={selector:$.HUI_ROOT,children:{shadowRoot:{selector:X,children:(q={},q[C.HEADER]={selector:$.HEADER},q[C.HUI_VIEW]={selector:$.HUI_VIEW},q)}}},k)}}},W),te={shadowRoot:{selector:X,children:(U={},U[M.HA_MORE_INFO_DIALOG]={selector:$.HA_MORE_INFO_DIALOG,children:{shadowRoot:{selector:X,children:(V={},V[M.HA_DIALOG]={selector:$.HA_DIALOG,children:(K={},K[M.HA_DIALOG_CONTENT]={selector:$.HA_DIALOG_CONTENT,children:(Y={},Y[M.HA_MORE_INFO_DIALOG_INFO]={selector:$.HA_MORE_INFO_DIALOG_INFO},Y[M.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]={selector:$.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK},Y[M.HA_DIALOG_MORE_INFO_SETTINGS]={selector:$.HA_DIALOG_MORE_INFO_SETTINGS},Y)},K)},V)}}},U)}},ne=function(e,t,n,r){return void 0===n&&(n=null),void 0===r&&(r=!1),Object.entries(t||{}).reduce((function(t,o){var i=o[0],a=o[1];if(a.selector===X&&n)return a.children?P(P({},t),ne(e,a.children,n,!0)):t;var s=n?n.then((function(t){return t?L(t,(n=a.selector,r?"$ "+n:n),e):null;var n})):L(a.selector,e);return t[i]={element:s,children:ne(e,a.children,s),selector:new g(s,e)},t}),{})},re=function(e,t){for(var n=0,r=Object.entries(t);n<r.length;n++){var o=r[n];if(o[0]===e)return o[1];var i=re(e,o[1].children);if(i)return i}},oe=function(e,t){return Object.keys(e).reduce((function(e,n){var r=re(n,t);r.children;var o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(r,["children"]);return e[n]=P({},o),e}),{})},ie=function(){function e(){this.delegate=document.createDocumentFragment()}return e.prototype.addEventListener=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.delegate).addEventListener.apply(e,t)},e.prototype.dispatchEvent=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this.delegate).dispatchEvent.apply(e,t)},e.prototype.removeEventListener=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this.delegate).removeEventListener.apply(e,t)},e}(),ae=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n._config=P(P({},J),t),n._timestaps={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype._dispatchEvent=function(e,t){var n=Date.now();n-this._timestaps[e]<this._config.eventThreshold||(this._timestaps[e]=n,this.dispatchEvent(new CustomEvent(e,{detail:t})))},t.prototype._updateDialogElements=function(e){var t,n=this;void 0===e&&(e=M.HA_MORE_INFO_DIALOG_INFO),this._dialogTree=ne(this._config,te,this._haRootElements.HOME_ASSISTANT.element);var r=oe(M,this._dialogTree);r.HA_DIALOG_CONTENT.element.then((function(e){n._dialogsContentObserver.disconnect(),n._dialogsContentObserver.observe(e,{childList:!0})})),this._haDialogElements=function(e,t){return[M.HA_MORE_INFO_DIALOG,M.HA_DIALOG,M.HA_DIALOG_CONTENT,t].reduce((function(t,n){return t[n]=e[n],t}),{})}(r,e);var o=((t={})[M.HA_MORE_INFO_DIALOG_INFO]=G.ON_MORE_INFO_DIALOG_OPEN,t[M.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]=G.ON_HISTORY_AND_LOGBOOK_DIALOG_OPEN,t[M.HA_DIALOG_MORE_INFO_SETTINGS]=G.ON_SETTINGS_DIALOG_OPEN,t);this._dispatchEvent(o[e],this._haDialogElements)},t.prototype._updateRootElements=function(){var e=this;this._homeAssistantRootTree=ne(this._config,Z),this._haRootElements=oe(H,this._homeAssistantRootTree),this._haRootElements[H.HOME_ASSISTANT].selector.$.element.then((function(t){e._dialogsObserver.disconnect(),e._dialogsObserver.observe(t,{childList:!0})})),this._haRootElements[H.PARTIAL_PANEL_RESOLVER].element.then((function(t){e._panelResolverObserver.disconnect(),t&&e._panelResolverObserver.observe(t,{subtree:!0,childList:!0})})),this._dispatchEvent(G.ON_LISTEN,this._haRootElements),this._dispatchEvent(G.ON_PANEL_LOAD,this._haRootElements)},t.prototype._updateLovelaceElements=function(){var e=this;this._homeAssistantResolverTree=ne(this._config,ee,this._haRootElements[H.HA_DRAWER].element),this._haResolverElements=oe(C,this._homeAssistantResolverTree),this._haResolverElements[C.HA_PANEL_LOVELACE].element.then((function(t){e._lovelaceObserver.disconnect(),t&&(e._lovelaceObserver.observe(t.shadowRoot,{childList:!0}),e._dispatchEvent(G.ON_LOVELACE_PANEL_LOAD,P(P({},e._haRootElements),e._haResolverElements)))}))},t.prototype._watchDialogs=function(e){var t=this;e.forEach((function(e){e.addedNodes.forEach((function(e){e.localName===$.HA_MORE_INFO_DIALOG&&t._updateDialogElements()}))}))},t.prototype._watchDialogsContent=function(e){var t=this;e.forEach((function(e){e.addedNodes.forEach((function(e){var n,r=((n={})[$.HA_MORE_INFO_DIALOG_INFO]=M.HA_MORE_INFO_DIALOG_INFO,n[$.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK]=M.HA_DIALOG_MORE_INFO_HISTORY_AND_LOGBOOK,n[$.HA_DIALOG_MORE_INFO_SETTINGS]=M.HA_DIALOG_MORE_INFO_SETTINGS,n);if(e.localName&&e.localName in r){var o=e.localName;t._updateDialogElements(r[o])}}))}))},t.prototype._watchDashboards=function(e){var t=this;e.forEach((function(e){e.addedNodes.forEach((function(e){t._dispatchEvent(G.ON_PANEL_LOAD,t._haRootElements),e.localName===$.HA_PANEL_LOVELACE&&t._updateLovelaceElements()}))}))},t.prototype._watchLovelace=function(e){var t=this;e.forEach((function(e){e.addedNodes.forEach((function(e){e.localName===$.HUI_ROOT&&t._updateLovelaceElements()}))}))},t.prototype.listen=function(){this._watchDialogsBinded=this._watchDialogs.bind(this),this._watchDialogsContentBinded=this._watchDialogsContent.bind(this),this._watchDashboardsBinded=this._watchDashboards.bind(this),this._watchLovelaceBinded=this._watchLovelace.bind(this),this._dialogsObserver=new MutationObserver(this._watchDialogsBinded),this._dialogsContentObserver=new MutationObserver(this._watchDialogsContentBinded),this._panelResolverObserver=new MutationObserver(this._watchDashboardsBinded),this._lovelaceObserver=new MutationObserver(this._watchLovelaceBinded),this._updateRootElements(),this._updateLovelaceElements()},t.prototype.addEventListener=function(t,n,r){e.prototype.addEventListener.call(this,t,n,r)},t}(ie),se="[home-assistant-javascript-templates]",ce=/^([a-z_]+)\.(\w+)$/;!function(e){e.UNKNOWN="unknown",e.UNAVAILABLE="unavailable"}(Q||(Q={})),function(e){e.AREA_ID="area_id",e.NAME="name"}(z||(z={}));var ue=function(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n.replace(ce,"$2")]=r,e}),{})},le=function(e){return e.includes(".")};function _e(e,t){var n=function(){return Object.entries(e.hass.areas)},r=function(){return Object.entries(e.hass.entities)},o=new Set,i=new Set,a=function(n){(t||e.hass.states[n])&&o.add(n)},s=function(e){i.add(e)};return{get hass(){return e.hass},states:new Proxy((function(t){var n;if(le(t))return a(t),null===(n=e.hass.states[t])||void 0===n?void 0:n.state;throw SyntaxError("".concat(se,": states method cannot be used with a domain, use it as an object instead."))}),{get:function(n,r){if(le(r))return a(r),e.hass.states[r];var o=Object.entries(e.hass.states).filter((function(e){return e[0].startsWith(r)}));return(t||o.length)&&s(r),new Proxy(ue(o),{get:function(e,t){return a("".concat(r,".").concat(t)),e[t]}})}}),is_state:function(t,n){var r;return a(t),(null===(r=e.hass.states[t])||void 0===r?void 0:r.state)===n},state_attr:function(t,n){var r,o;return a(t),null===(o=null===(r=e.hass.states[t])||void 0===r?void 0:r.attributes)||void 0===o?void 0:o[n]},is_state_attr:function(e,t,n){return this.state_attr(e,t)===n},has_value:function(e){return!!this.states(e)&&!(this.is_state(e,Q.UNKNOWN)||this.is_state(e,Q.UNAVAILABLE))},entities:new Proxy((function(n){if(void 0===n)return e.hass.entities;if(le(n))return a(n),e.hass.entities[n];var o=r().filter((function(e){return e[0].startsWith(n)}));return(t||o.length)&&s(n),new Proxy(ue(o),{get:function(e,t){return a("".concat(n,".").concat(t)),e[t]}})}),{get:function(e,t){return e(t)}}),entity_prop:function(t,n){var r;return a(t),null===(r=e.hass.entities[t])||void 0===r?void 0:r[n]},is_entity_prop:function(e,t,n){return this.entity_prop(e,t)===n},devices:new Proxy((function(t){if(void 0===t)return e.hass.devices;if(le(t))throw SyntaxError("".concat(se,": devices method cannot be used with an entity id, you should use a device id instead."));return e.hass.devices[t]}),{get:function(t,n){if(le(n))throw SyntaxError("".concat(se,": devices cannot be accesed using an entity id, you should use a device id instead."));return e.hass.devices[n]}}),device_attr:function(t,n){var r;return null===(r=e.hass.devices[t])||void 0===r?void 0:r[n]},is_device_attr:function(e,t,n){return this.device_attr(e,t)===n},device_id:function(t){var n;return a(t),null===(n=e.hass.entities[t])||void 0===n?void 0:n.device_id},areas:function(){return n().map((function(e){return e[1].area_id}))},area_id:function(t){var r;if(t in e.hass.devices)return this.device_attr(t,z.AREA_ID);var o=this.device_id(t);if(o)return this.device_attr(o,z.AREA_ID);var i=n().find((function(e){return e[1].name===t}));return null===(r=null==i?void 0:i[1])||void 0===r?void 0:r.area_id},area_name:function(t){var r,o;t in e.hass.devices&&(o=this.device_attr(t,z.AREA_ID));var i=this.device_id(t);i&&(o=this.device_attr(i,z.AREA_ID));var a=n().find((function(e){var n=e[1];return n.area_id===t||n.area_id===o}));return null===(r=null==a?void 0:a[1])||void 0===r?void 0:r.name},area_entities:function(e){var t=n().find((function(t){var n=t[1];return n.area_id===e||n.name===e}));return t?r().filter((function(e){return e[1].area_id===t[1].area_id})).map((function(e){return e[0]})):[]},area_devices:function(t){var r=n().find((function(e){var n=e[1];return n.area_id===t||n.name===t}));return r?Object.entries(e.hass.devices).filter((function(e){return e[1].area_id===r[1].area_id})).map((function(e){return e[1].id})):[]},get user_name(){return e.hass.user.name},get user_is_admin(){return e.hass.user.is_admin},get user_is_owner(){return e.hass.user.is_owner},get user_agent(){return window.navigator.userAgent},tracked:{get entities(){return Array.from(o)},get domains(){return Array.from(i)}},cleanTrackedEntities:function(){o.clear()},cleanTrackedDomains:function(){i.clear()}}}var de,he=function(){function e(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),this._scopped=_e(e,n),this._errors=t}return e.prototype.renderTemplate=function(e){try{var t=e.includes("return")?e:"return ".concat(e);return new Function("hass","states","is_state","state_attr","is_state_attr","has_value","entities","entity_prop","is_entity_prop","devices","device_attr","is_device_attr","device_id","areas","area_id","area_name","area_entities","area_devices","user_name","user_is_admin","user_is_owner","user_agent","".concat('"use strict";'," ").concat(t))(this._scopped.hass,this._scopped.states,this._scopped.is_state.bind(this._scopped),this._scopped.state_attr.bind(this._scopped),this._scopped.is_state_attr.bind(this._scopped),this._scopped.has_value.bind(this._scopped),this._scopped.entities,this._scopped.entity_prop,this._scopped.is_entity_prop.bind(this._scopped),this._scopped.devices,this._scopped.device_attr.bind(this._scopped),this._scopped.is_device_attr.bind(this._scopped),this._scopped.device_id.bind(this._scopped),this._scopped.areas.bind(this._scopped),this._scopped.area_id.bind(this._scopped),this._scopped.area_name.bind(this._scopped),this._scopped.area_entities.bind(this._scopped),this._scopped.area_devices.bind(this._scopped),this._scopped.user_name,this._scopped.user_is_admin,this._scopped.user_is_owner,this._scopped.user_agent)}catch(e){if(this._errors)throw e;return void console.warn(e)}},Object.defineProperty(e.prototype,"tracked",{get:function(){return this._scopped.tracked},enumerable:!1,configurable:!0}),e.prototype.cleanTrackedEntities=function(){this._scopped.cleanTrackedEntities()},e.prototype.cleanTrackedDomains=function(){this._scopped.cleanTrackedDomains()},e.prototype.cleanTracked=function(){this._scopped.cleanTrackedEntities(),this._scopped.cleanTrackedDomains()},e}();!function(e){e.TEXT="text",e.DATA_PANEL="data-panel",e.HREF="href"}(de||(de={}));var fe,pe,Ee,Ae,Oe,ve,me,Ie,ye="custom-sidebar",Te="sidebar-config",Ne="".concat("/local/").concat(Te),Se="string",be="undefined";!function(e){e.SIDEBAR="ha-sidebar",e.PAPER_LISTBOX="paper-listbox",e.PAPER_ICON_ITEM="paper-icon-item",e.HA_SVG_ICON="ha-svg-icon",e.HA_ICON="ha-icon",e.HA_ICON_BUTTON="ha-icon-button"}(fe||(fe={})),function(e){e.SCOPE=":scope",e.TITLE=".title",e.ITEM='a[role="option"]',e.SPACER=".spacer",e.ITEM_TEXT=".item-text",e.NOTIFICATION_BADGE=".notification-badge",e.NOTIFICATIONS_BADGE_COLLAPSED=".notification-badge-collapsed",e.EDIT_SIDEBAR_BUTTON_LEGACY="ha-panel-profile$ ha-settings-row mwc-button",e.EDIT_SIDEBAR_BUTTON="ha-panel-profile ha-profile-section-general$ ha-settings-row mwc-button",e.SIDEBAR_NOTIFICATIONS=".notifications",e.PROFILE=".profile"}(pe||(pe={})),function(e){e.NOTIFICATIONS_BADGE="notification-badge",e.NOTIFICATIONS_BADGE_COLLAPSED="notification-badge-collapsed",e.IRON_SELECTED="iron-selected"}(Ee||(Ee={})),function(e){e.PANEL="data-panel",e.ROLE="role",e.PROCESSED="data-processed",e.WITH_NOTIFICATION="data-notification",e.ARIA_SELECTED="aria-selected",e.ARIA_DISABLED="aria-disabled",e.DISABLED="disabled",e.HREF="href",e.STYLE="style"}(Ae||(Ae={})),function(e){e.MOUSEDOWN="mousedown",e.MOUSEENTER="mouseenter",e.MOUSELEAVE="mouseleave",e.KEYDOWN="keydown",e.HASS_EDIT_SIDEBAR="hass-edit-sidebar"}(Oe||(Oe={})),function(e){e.ARROW_DOWN="ArrowDown",e.ARROW_UP="ArrowUp",e.ENTER="Enter",e.TAB="Tab"}(ve||(ve={})),function(e){e.PAPER_ICON_ITEM="PAPER-ICON-ITEM",e.A="A"}(me||(me={})),function(e){e.SUBSCRIBE_EVENTS="subscribe_events",e.RENDER_TEMPLATE="render_template"}(Ie||(Ie={}));var Le=["HOME-ASSISTANT","HOME-ASSISTANT-MAIN","HA-SIDEBAR"],we="/profile",Re=/^\s*\[\[\[([\s\S]+)\]\]\]\s*$/,ge=/\{\{[\s\S]*\}\}|\{%[\s\S]*%\}/,De=/(\s*)([\w-]+\s*:\s*[^;]+;?|\})(\s*)/g,Pe=/^([a-z_]+)[\w.]*$/,He=function(e){return Array.isArray(e)?e.map((function(e){return e.toLocaleLowerCase()})):e.toLowerCase().split(/\s*,\s*/)},Ce=function(e){for(var t=[],n=[],r=e.length-1;r>=0;r--){var o=e[r];t.includes(o.item)||(n.unshift(o),t.push(o.item))}return n.sort((function(e,t){return!!e.bottom!=!!t.bottom?e.bottom?1:-1:typeof e.order===be||typeof t.order===be?e.order===t.order?0:typeof e.order===be?1:-1:e.order-t.order}))},Me=function(e,t){return new Promise((function(n){var r=0,o=function(){var i=e();i&&t(i)?n(i):++r<100?setTimeout(o,50):n(i)};o()}))},Ge="Invalid configuration",Be=function(e){return typeof e===be||(typeof e===Se||Array.isArray(e)&&e.some((function(e){return typeof e===Se})))},xe=function(e){if(!e.order)throw new SyntaxError("".concat(Ge,', every item in "exceptions" array should have an "order" property'));if(!Be(e.user))throw new SyntaxError("".concat(Ge,', exceptions "user" property should be a string or an array of strings'));if(!Be(e.not_user))throw new SyntaxError("".concat(Ge,', exceptions "not_user" property should be a string or an array of strings'));if(!Be(e.device))throw new SyntaxError("".concat(Ge,', exceptions "device" property should be a string or an array of strings'));if(!Be(e.not_device))throw new SyntaxError("".concat(Ge,', exceptions "not_device" property should be a string or an array of strings'));if(e.user&&e.not_user)throw new SyntaxError("".concat(Ge,', exceptions "user" and "not_user" properties cannot be used together'));if(e.device&&e.not_device)throw new SyntaxError("".concat(Ge,', exceptions "device" and "not_device" properties cannot be used together'));return e.order.every(Fe)},Fe=function(e){if(!e.item)throw new SyntaxError("".concat(Ge,', every item in an "order" array should have an "item" property'));if(typeof e.item!==Se)throw new SyntaxError("".concat(Ge," in ").concat(e.item,", item property should be an string"));if(e.new_item){if(!e.href)throw new SyntaxError("".concat(Ge," in ").concat(e.item,', if you set "new_item" as "true", "href" property is necessary'));if(typeof e.href!==Se)throw new SyntaxError("".concat(Ge," in ").concat(e.item,', "href" property should be a string'));if(!e.icon)throw new SyntaxError("".concat(Ge," in ").concat(e.item,', if you set "new_item" as "true", "icon" property is necessary'));if(typeof e.icon!==Se)throw new SyntaxError("".concat(Ge," in ").concat(e.item,', "icon" property should be a string'))}return!0},je=function(e){if(e.order){if(Array.isArray(e.order)&&e.order.every(Fe)&&function(e){if(typeof e===be)return!0;if(!Array.isArray(e))throw new SyntaxError("".concat(Ge,", exceptions should be an array"));return e.every(xe)}(e.exceptions))return!0;throw new SyntaxError("".concat(Ge,', "order" parameter should be an array'))}throw new SyntaxError("".concat(Ge,', "order" parameter is required'))},We=function(){return t(void 0,void 0,void 0,(function(){var e,t;return n(this,(function(n){return e="".concat(ye,": JSON config file not found."),t="Make sure you have valid config in /config/www/".concat(Te,".json file."),[2,new Promise((function(n){fetch("".concat(Ne,".json?hash=").concat(Math.random().toString(16).slice(2))).then((function(r){if(!r.ok)throw Error("".concat(e,"\n").concat(t));r.json().then((function(e){var r;(null===(r=e.id)||void 0===r?void 0:r.startsWith("example_json"))&&console.warn("".concat(ye,": You seem to be using the example configuration.\n").concat(t)),je(e)&&n(e)})).catch((function(e){throw Error("".concat(ye,": ").concat(e.message))}))})).catch((function(){throw Error("".concat(e,"\n").concat(t))}))}))]}))}))},ke=function(){function o(){var e=this,t=new ae;t.addEventListener(G.ON_LISTEN,(function(t){e._homeAssistant=t.detail.HOME_ASSISTANT,e._main=t.detail.HOME_ASSISTANT_MAIN,e._sidebar=t.detail.HA_SIDEBAR,e._partialPanelResolver=t.detail.PARTIAL_PANEL_RESOLVER}),{once:!0}),t.addEventListener(G.ON_PANEL_LOAD,this._panelLoaded.bind(this)),t.listen(),this._items=[],this._jsSuscriptions=new Map,this._sidebarScroll=0,this._itemTouchedBinded=this._itemTouched.bind(this),this._mouseEnterBinded=this._mouseEnter.bind(this),this._mouseLeaveBinded=this._mouseLeave.bind(this),this._configPromise=We(),this._process()}return o.prototype._getOrder=function(){return t(this,void 0,void 0,(function(){var e,t=this;return n(this,(function(n){return e=this._getCurrentDevice(),[2,this._configPromise.then((function(n){return function(e,t,n,o){if(o){var i=o.filter((function(n){return n.user&&He(n.user).includes(e)||n.not_user&&!He(n.not_user).includes(e)||n.device&&He(n.device).some((function(e){return t.includes(e)}))||n.not_device&&He(n.not_device).every((function(e){return!t.includes(e)}))})),a=i.flatMap((function(e){return e.order})),s=i.every((function(e){return!!e.base_order}));return Ce(s?r(r([],n,!0),a,!0):a)}return Ce(n)}(t._ha.hass.user.name.toLocaleLowerCase(),e,n.order,n.exceptions)}))]}))}))},o.prototype._getElements=function(){return t(this,void 0,void 0,(function(){var e,t,r;return n(this,(function(n){switch(n.label){case 0:return[4,this._sidebar.selector.$.query(fe.PAPER_LISTBOX).element];case 1:return e=n.sent(),[4,Me((function(){return e.querySelector(":scope > ".concat(pe.SPACER))}),(function(e){return!!e}))];case 2:return t=n.sent(),[4,Me((function(){return e.querySelectorAll(":scope > ".concat(pe.ITEM))}),(function(e){return Array.from(e).every((function(e){return e.querySelector(pe.ITEM_TEXT).innerText.trim().length>0}))}))];case 3:return r=n.sent(),[2,[e,r,t]]}}))}))},o.prototype._hasReady=function(){return t(this,void 0,void 0,(function(){var e=this;return n(this,(function(t){return[2,Me((function(){return e._ha.hass}),(function(e){return!!(e&&e.areas&&e.devices&&e.entities&&e.states&&e.user)}))]}))}))},o.prototype._getElementWithConfig=function(e){return Promise.all([this._configPromise,e])},o.prototype._getCurrentDevice=function(){return navigator.userAgent.toLowerCase()},o.prototype._buildNewItem=function(e){var t=document.createElement("a");return t.href=e.href,t.target=e.target||"",t.tabIndex=-1,t.setAttribute(Ae.ROLE,"option"),t.setAttribute(Ae.PANEL,e.item.toLowerCase().replace(/\s+/,"-")),t.setAttribute(Ae.ARIA_SELECTED,"false"),t.innerHTML='\n            <paper-icon-item\n                tabindex="0"\n                '.concat(Ae.ROLE,'="option"\n                ').concat(Ae.ARIA_DISABLED,'="false"\n            >\n                <ha-icon\n                    slot="item-icon"\n                    icon="').concat(e.icon,'"\n                >\n                </ha-icon>\n                <span class="').concat(Ee.NOTIFICATIONS_BADGE," ").concat(Ee.NOTIFICATIONS_BADGE_COLLAPSED,'"></span>\n                <span class="item-text">\n                    ').concat(e.item,'\n                </span>\n                <span class="').concat(Ee.NOTIFICATIONS_BADGE,'"></span>\n            </paper-icon-item>\n        ').trim(),t},o.prototype._updateIcon=function(e,t){var n=e.querySelector([fe.HA_SVG_ICON,fe.HA_ICON].join(","));if(n){var r=document.createElement(fe.HA_ICON);r.setAttribute("icon",t),r.setAttribute("slot","item-icon"),n.replaceWith(r)}},o.prototype._subscribeTitle=function(){var e=this,t=this._sidebar.selector.$.query(pe.TITLE).element;this._getElementWithConfig(t).then((function(t){var n=t[0],r=t[1];n.title&&e._subscribeTemplate(r,n.title)}))},o.prototype._subscribeName=function(e,t){this._subscribeTemplate(e.querySelector(pe.ITEM_TEXT),t)},o.prototype._subscribeNotification=function(e,t){var n=e.querySelector("".concat(pe.NOTIFICATION_BADGE,":not(").concat(pe.NOTIFICATIONS_BADGE_COLLAPSED,")")),r=e.querySelector(pe.NOTIFICATIONS_BADGE_COLLAPSED);n||((n=document.createElement("span")).classList.add(Ee.NOTIFICATIONS_BADGE),e.querySelector(fe.PAPER_ICON_ITEM).appendChild(n)),r||((r=document.createElement("span")).classList.add(Ee.NOTIFICATIONS_BADGE,Ee.NOTIFICATIONS_BADGE_COLLAPSED),e.querySelector("".concat(fe.HA_SVG_ICON,", ").concat(fe.HA_ICON)).after(r));this._subscribeTemplate(n,t,(function(t){t.length?(n.innerHTML=t,r.innerHTML=t,e.setAttribute(Ae.WITH_NOTIFICATION,"true")):(n.innerHTML="",r.innerHTML="",e.removeAttribute(Ae.WITH_NOTIFICATION))}))},o.prototype._subscribeTemplate=function(e,t,n){e.innerHTML="",Re.test(t)?this._createJsTemplateSubscription(e,t.replace(Re,"$1"),n):ge.test(t)?this._createJinjaTemplateSubscription(e,t,n):n?n(t):e.innerHTML=t},o.prototype._createJsTemplateSubscription=function(e,t,n){var o=this,i=function(){o._renderer.cleanTracked();var a=o._renderer.renderTemplate(t),s=o._renderer.tracked,c=s.entities,u=s.domains;r(r([],c,!0),u,!0).forEach((function(t){if(o._jsSuscriptions.has(t)){var n=o._jsSuscriptions.get(t);n.has(e)||n.set(e,i)}else o._jsSuscriptions.set(t,new Map([[e,i]]))}));var l="";("string"==typeof a||"number"==typeof a&&!Number.isNaN(a)||"boolean"==typeof a||"object"==typeof a)&&(l="string"==typeof a?a.trim():"number"==typeof a||"boolean"==typeof a?a.toString():JSON.stringify(a)),n?n(l):e.innerHTML=l};i()},o.prototype._createJinjaTemplateSubscription=function(e,t,n){window.hassConnection.then((function(r){r.conn.subscribeMessage((function(t){n?n("".concat(t.result)):e.innerHTML="".concat(t.result)}),{type:Ie.RENDER_TEMPLATE,template:t})}))},o.prototype._focusItemByKeyboard=function(e,t){for(var n,r=this._items.length-1,o=e.querySelector("\n            ".concat(pe.SCOPE," > ").concat(pe.ITEM,":not(.").concat(Ee.IRON_SELECTED,"):focus,\n            ").concat(pe.SCOPE," > ").concat(pe.ITEM,":focus,\n            ").concat(pe.SCOPE," > ").concat(pe.ITEM,":has(> ").concat(fe.PAPER_ICON_ITEM,":focus)\n        ").trim()),i=0,a=0,s=Object.entries(this._items);a<s.length;a++){var c=s[a],u=c[0],l=c[1];l.element===o&&(i=+u),l.element.tabIndex=-1}n=t?i<r?i+1:0:i>0?i-1:r,this._items[n].element.focus(),this._items[n].element.tabIndex=0},o.prototype._focusItemByTab=function(e,t,n){var r=this._items.length-1;if(t.nodeName===me.A){var o=t,i=this._items.findIndex((function(e){return e.element===o})),a=NaN;if(n&&i<r?a=i+1:!n&&i>0&&(a=i-1),Number.isNaN(a))if(n)e.querySelector(pe.SIDEBAR_NOTIFICATIONS).focus();else e.querySelector(fe.HA_ICON_BUTTON).focus();else this._items[a].element.querySelector(fe.PAPER_ICON_ITEM).focus()}else{if(n)e.querySelector("".concat(pe.PROFILE," > ").concat(fe.PAPER_ICON_ITEM)).focus();else this._items[r].element.querySelector(fe.PAPER_ICON_ITEM).focus()}},o.prototype._getActivePaperIconElement=function(e){void 0===e&&(e=document);var t=e.activeElement;return t?t instanceof HTMLElement&&(t.nodeName===me.PAPER_ICON_ITEM||t.nodeName===me.A&&"option"===t.getAttribute("role"))?t:t.shadowRoot&&Le.includes(t.nodeName)?this._getActivePaperIconElement(t.shadowRoot):null:null},o.prototype._processSidebar=function(){var e=this;this._getElementWithConfig(this._main.element).then((function(e){var t=e[0],n=e[1];!1===t.sidebar_editable&&n.addEventListener(Oe.HASS_EDIT_SIDEBAR,(function(e){e.preventDefault(),e.stopImmediatePropagation()}),!0)})),this._getElementWithConfig(this._sidebar.selector.$.element).then((function(t){var n,r,o,i,a=t[0],s=t[1],c=s.querySelector(fe.PAPER_LISTBOX);c.addEventListener(Oe.KEYDOWN,(function(t){t.key!==ve.ARROW_DOWN&&t.key!==ve.ARROW_UP||(t.preventDefault(),t.stopImmediatePropagation(),e._focusItemByKeyboard(c,t.key===ve.ARROW_DOWN))}),!0),window.addEventListener(Oe.KEYDOWN,(function(t){if(t.key===ve.TAB){var n=e._getActivePaperIconElement();if(n)if(n.nodeName===me.PAPER_ICON_ITEM){var r=n.parentElement;r.getAttribute(Ae.HREF)!==we&&(t.preventDefault(),t.stopImmediatePropagation(),e._focusItemByTab(s,r,!t.shiftKey))}else n.getAttribute(Ae.HREF)!==we&&(t.preventDefault(),t.stopImmediatePropagation(),e._focusItemByTab(s,n,!t.shiftKey))}}),!0),n="\n                ".concat(fe.PAPER_LISTBOX," > ").concat(pe.ITEM," > ").concat(fe.PAPER_ICON_ITEM," > ").concat(pe.NOTIFICATION_BADGE,":not(").concat(pe.NOTIFICATIONS_BADGE_COLLAPSED,") {\n                    border-radius: 20px;\n                    left: calc(var(--app-drawer-width, 248px) - 22px);\n                    max-width: 80px;\n                    overflow: hidden;\n                    padding: 0px 5px;\n                    transform: translateX(-100%);\n                    text-overflow: ellipsis;\n                    text-wrap: nowrap;   \n                }\n                ").concat(fe.PAPER_LISTBOX," > ").concat(pe.ITEM," > ").concat(fe.PAPER_ICON_ITEM," > ").concat(pe.NOTIFICATIONS_BADGE_COLLAPSED," {\n                    bottom: 14px;\n                    font-size: 0.65em;\n                    left: 26px;\n                    position: absolute;  \n                }\n                :host([expanded]) ").concat(fe.PAPER_LISTBOX," > ").concat(pe.ITEM," > ").concat(fe.PAPER_ICON_ITEM," > ").concat(pe.NOTIFICATIONS_BADGE_COLLAPSED," {\n                    opacity: 0;\n                }\n                ").concat(fe.PAPER_LISTBOX," > ").concat(pe.ITEM,"[").concat(Ae.WITH_NOTIFICATION,"] > ").concat(fe.PAPER_ICON_ITEM," > ").concat(pe.ITEM_TEXT," {\n                    max-width: calc(100% - 86px);\n                }\n                ").concat(a.styles||"","\n                ").trim(),o=function(e){return e.host.localName}(r=s),(i=document.createElement("style")).setAttribute("id","".concat(ye,"_").concat(o)),r.appendChild(i),i.innerHTML=n.replace(De,"$2")}))},o.prototype._watchForEntitiesChange=function(){var e=this;window.hassConnection.then((function(t){t.conn.subscribeMessage((function(t){return e._entityWatchCallback(t)}),{type:Ie.SUBSCRIBE_EVENTS,event_type:"state_changed"})}))},o.prototype._entityWatchCallback=function(e){if(this._jsSuscriptions.size){var t=e.data.entity_id,n=t.replace(Pe,"$1");if(this._jsSuscriptions.has(t)){var r=this._jsSuscriptions.get(t).values();Array.from(r).forEach((function(e){e()}))}if(this._jsSuscriptions.has(n)){r=this._jsSuscriptions.get(n).values();Array.from(r).forEach((function(e){e()}))}}},o.prototype._rearrange=function(){var t=this;Promise.all([this._getOrder(),this._getElements()]).then((function(n){var r=n[0],o=n[1],i=o[0],a=o[1],s=o[2],c=0,u=!1,l=Array.from(a),_=new Set,d=r.reduce((function(t,n){var r=n.item,o=n.match,i=n.exact,a=n.new_item,s=r.toLocaleLowerCase(),c=a?void 0:l.find((function(e){var t=o===de.DATA_PANEL?e.getAttribute(Ae.PANEL):o===de.HREF?e.getAttribute(Ae.HREF):e.querySelector(pe.ITEM_TEXT).innerText.trim();return!((!i||r!==t)&&(i||!(null==t?void 0:t.toLowerCase().includes(s))))&&(!_.has(e)&&(_.add(e),!0))}));return c&&c.setAttribute(Ae.PROCESSED,"true"),(a||c)&&t.push(e(e({},n),{element:c})),a||c||console.warn("".concat(ye,": you have an order item in your configuration that didn't match any sidebar item: \"").concat(r,'"')),t}),[]),h=function(){u||(l.forEach((function(e){e.hasAttribute(Ae.PROCESSED)||(e.style.order="".concat(c))})),c++,s.style.order="".concat(c),c++,u=!0)};d.forEach((function(e){if(e.bottom&&h(),e.new_item&&!e.hide){var n=t._buildNewItem(e);n.style.order="".concat(c),i.appendChild(n),e.element=n}else if(e.element){var r=e.element;r.style.order="".concat(c),e.hide&&(r.style.display="none"),e.icon&&t._updateIcon(r,e.icon),e.href&&(r.href=e.href),e.target&&(r.target=e.target)}e.name&&t._subscribeName(e.element,e.name),e.notification&&t._subscribeNotification(e.element,e.notification),e.hide||(e.new_item&&(e.element.addEventListener(Oe.MOUSEENTER,t._mouseEnterBinded),e.element.addEventListener(Oe.MOUSELEAVE,t._mouseLeaveBinded)),e.element.addEventListener(Oe.MOUSEDOWN,t._itemTouchedBinded),e.element.addEventListener(Oe.KEYDOWN,(function(e){e.key===ve.ENTER&&t._itemTouchedBinded()})),t._items.push(e)),c++})),h(),t._panelLoaded(),t._watchForEntitiesChange()}))},o.prototype._itemTouched=function(){return t(this,void 0,void 0,(function(){var e=this;return n(this,(function(t){return this._sidebar.selector.$.query(fe.PAPER_LISTBOX).element.then((function(t){e._sidebarScroll=t.scrollTop})),[2]}))}))},o.prototype._mouseEnter=function(e){this._sidebar.element.then((function(t){t.alwaysExpand||(t._mouseLeaveTimeout&&(clearTimeout(t._mouseLeaveTimeout),t._mouseLeaveTimeout=void 0),t._showTooltip(e.currentTarget))}))},o.prototype._mouseLeave=function(){return t(this,void 0,void 0,(function(){return n(this,(function(e){return this._sidebar.element.then((function(e){e._mouseLeaveTimeout&&clearTimeout(e._mouseLeaveTimeout),e._mouseLeaveTimeout=window.setTimeout((function(){e._hideTooltip()}),500)})),[2]}))}))},o.prototype._panelLoaded=function(){return t(this,void 0,void 0,(function(){var e,t,r,o,i,a,s;return n(this,(function(n){switch(n.label){case 0:return[4,this._partialPanelResolver.element];case 1:return e=n.sent(),t=e.__route.path,[4,this._sidebar.selector.$.query(fe.PAPER_LISTBOX).element];case 2:return r=n.sent(),o=r.querySelector(["".concat(pe.SCOPE," > ").concat(pe.ITEM,'[href="').concat(t,'"]'),"".concat(pe.SCOPE," > ").concat(pe.ITEM,'[href="').concat(t,'/dashboard"]')].join(",")),i=o?null:this._items.reduce((function(e,n){var r=n.element,o=r.getAttribute(Ae.HREF);return t.startsWith(o)&&(!e||o.length>e.getAttribute(Ae.HREF).length)&&(e=r),e}),null),this._items.forEach((function(e){var t=e.element,n=o&&o===t||!o&&i===t;t.classList.toggle(Ee.IRON_SELECTED,n),t.setAttribute(Ae.ARIA_SELECTED,"".concat(n))})),r.scrollTop!==this._sidebarScroll&&(r.scrollTop=this._sidebarScroll),"/profile/general"!==t?[3,5]:[4,this._configPromise];case 3:return a=n.sent(),[4,this._partialPanelResolver.selector.query(pe.EDIT_SIDEBAR_BUTTON).element];case 4:s=n.sent(),!1===a.sidebar_editable&&s&&s.setAttribute(Ae.DISABLED,""),n.label=5;case 5:return[2]}}))}))},o.prototype._process=function(){var e=this;this._homeAssistant.element.then((function(t){e._ha=t,e._hasReady().then((function(){e._renderer=new he(e._ha),e._subscribeTitle(),e._rearrange()}))})),this._processSidebar()},o}();window.CustomSidebar||(console.info("%c≡ ".concat(ye.toUpperCase()," (JSON)%cv").concat("4.7.1"),"font-weight: bold; background: #EEEEEE; color: #666666; padding: 2px 5px;","font-weight: normal; background: #E87A24; color: #FFFFFF; padding: 2px 5px"),window.CustomSidebar=new ke)}();
